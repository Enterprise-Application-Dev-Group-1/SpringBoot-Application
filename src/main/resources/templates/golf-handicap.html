<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Golf Handicap Calculator</title>
    <link rel="stylesheet" th:href="@{/golf-handicap.css}">
</head>
<body>
    <div class="container">
        <h1>Golf Handicap Calculator</h1>

        <form th:action="@{/api/calculate-handicap}" method="post" class="handicap-form">
            <div class="round-inputs" id="roundInputs">
                <div class="round">
                    <h3>Round 1</h3>
                    <div class="input-group">
                        <label>Score:</label>
                        <input type="number" name="scores" required>
                    </div>
                    <div class="input-group">
                        <label>Par:</label>
                        <input type="number" name="pars" required>
                    </div>
                    <div class="input-group">
                        <label>Slope Rating:</label>
                        <input type="number" name="slopes" min="55" max="155">
                    </div>
                </div>
            </div>

            <button type="button" onclick="addRound()" class="btn-add">Add Another Round</button>
            <button type="submit" class="btn-calculate">Calculate Handicap</button>
        </form>

        <div th:if="${handicap != null}" class="result">
            <h2>Your Handicap Index:</h2>
            <p class="handicap-value" th:text="${handicap}"></p>
        </div>
    </div>

    <script>
        function addRound() {
            const container = document.getElementById('roundInputs');
            const roundCount = container.children.length + 1;

            const roundDiv = document.createElement('div');
            roundDiv.className = 'round';
            roundDiv.innerHTML = `
                <h3>Round ${roundCount}</h3>
                <div class="input-group">
                    <label>Score:</label>
                    <input type="number" name="scores" required>
                </div>
                <div class="input-group">
                    <label>Par:</label>
                    <input type="number" name="pars" required>
                </div>
                <div class="input-group">
                    <label>Slope Rating:</label>
                    <input type="number" name="slopes" min="55" max="155">
                </div>
            `;

            container.appendChild(roundDiv);
        }
    </script>
</body>
</html>
